<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="gallery.css" />
    </head>
    <body>
        <%-include('header.ejs')%>

        <hr />

        <main>
            <div>후기</div>
            <hr />
            <div id="buttonBox">
                <div class="sorting" id="sorting">
                    <button class="sortButton" type="button" onclick="location.href = '/gallery?sort_method=0'">
                        최신순
                    </button>
                    <button class="sortButton" value="button" onclick="location.href = '/gallery?sort_method=1'">
                        조회순
                    </button>
                </div>
                <div class="new-button-container">
                    <button class="new-button" onclick="location.href='/gallery/reviewEdit'">새로작성</button>
                </div>
            </div>
            <section class="gallery">
                <ul class="images">
                    <% for (let i =0; i< data.length ;i++){ %>
                    <li class="img">
                        <a href="/gallery/review?galleryId=<%= data[i].galleryid %>">
                            <img
                                src="https://hwr-bucket.s3.ap-northeast-2.amazonaws.com/<%= data[i].thunmnail %>"
                                class="card-img-top"
                                onerror="this.src= '../static/ever2.jpeg'"
                                alt="..."
                            />
                        </a>
                    </li>
                    <% } %>
                </ul>
            </section>
            <hr />
        </main>
        <%-include('footer.ejs')%>
        <!-- <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"
        ></script> -->
        <script>
            async function fileupload(event) {
                event.preventDefault();
                const form = document.forms['axiosForm'];
                const formDatas = new FormData();
                const files = form.dynamic_files.files;
                console.log(files);
                for (let i = 0; i < files.length; i++) {
                    formDatas.append(`array_files`, files[i]);
                }
                const result = await axios({
                    url: '/gallery/multiAxios',
                    method: 'POST',
                    data: formDatas,
                    Headers: {
                        'Content-Type': 'multipart/form-data',
                    },
                });
                console.log(result.data);
            }
        </script>
    </body>
</html>
